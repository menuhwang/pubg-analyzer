<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header(${viewTitle})}"></head>
<body>
    <nav th:replace="~{fragments/navbar :: navbar}"></nav>
    <div class="container h-100 d-flex">
        <div class="vstack gap-3 my-auto">
            <h1 class="text-center pa-logo">PUBG Analyzer</h1>
            <form id="pa-search-player-form" class="row justify-content-center" method="get" action="/players">
                <div class="col-3 col-lg-2">
                    <select name="shard" class="form-select">
                        <option selected th:each="shard : ${shards}" th:if="${shard == 'STEAM'}" th:value="${shard}" th:text="${shard}"></option>
                        <option th:each="shard : ${shards}" th:unless="${shard == 'STEAM'}" th:value="${shard}" th:text="${shard}"></option>
                    </select>
                </div>
                <div class="col">
                    <input type="text" name="nickname" class="form-control" id="input-nickname" placeholder="닉네임을 입력해주세요.">
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-outline-dark h-100 align-middle">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </form>
            <div th:if="${!bookmarks.isEmpty()}" class="card" id="bookmark">
                <div class="card-header">
                    Bookmark
                </div>
                <div class="card-body p-0 py-1">
                    <ul class="list-group list-group-flush">
                        <li th:each="bookmark : ${bookmarks}" class="list-group-item">
                            <a class="text-black" th:href="${'/players?shard=' + bookmark.shard + '&nickname=' + bookmark.player}" th:text="${bookmark.player}"></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        const nicknameInput = document.getElementById('input-nickname');
        const searchPlayerForm = document.getElementById('pa-search-player-form');

        searchPlayerForm.addEventListener('submit', (event) => {
            const value = nicknameInput.value;
            if (isBlank(value)) {
                alert('닉네임을 입력해주세요.');
                event.preventDefault();
                return;
            }
            searchPlayerForm.submit();
        })

        function isBlank(text) {
            return !!text === false || text.trim().length === 0;
        }
    </script>
<th:block th:replace="~{fragments/footer :: footer}"></th:block>
</body>
</html>